<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Mini Game - Doando Sangue - Bancos de Vida</title>
  <meta name="description" content="Informações sobre Mini Game - Doando Sangue, requisitos e impedimentos">
  <meta name="keywords" content="Mini Game - Doando Sangue, quem pode doar, requisitos, impedimentos">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
  
  <style>
    #game-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    
    #game-screen {
      height: 400px;
      background-color: #fff;
      border-radius: 8px;
      position: relative;
      overflow: hidden;
      margin-bottom: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
    }
    
    #blood-drop {
      width: 50px;
      height: 80px;
      background-color: #e74c3c;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      position: absolute;
      transition: all 0.3s ease;
      cursor: pointer;
      z-index: 10;
    }
    
    #game-controls {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .game-btn {
      padding: 10px 20px;
      background-color: #e74c3c;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    
    .game-btn:hover {
      background-color: #c0392b;
    }
    
    #info-box {
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      display: none;
    }
    
    #level-indicator {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .blood-bag {
      width: 60px;
      height: 80px;
      background-color: #f8d7da;
      border: 2px solid #e74c3c;
      border-radius: 5px;
      position: absolute;
      bottom: 30px;
    }
    
    .obstacle {
      position: absolute;
      background-color: #34495e;
      border-radius: 5px;
    }
    
    .hidden {
      display: none;
    }
    
    .show {
      display: block;
    }
    
    .game-title {
      margin-bottom: 30px;
      color: #e74c3c;
    }
    
    .level-complete {
      text-align: center;
      padding: 20px;
    }
    
    .info-title {
      font-weight: bold;
      color: #e74c3c;
      margin-bottom: 10px;
    }
  </style>
</head>

<body class="blog-page">

  <header id="header" class="header fixed-top">

    <div class="topbar d-flex align-items-center">
      <div class="container d-flex justify-content-center justify-content-md-between">
        <div class="contact-info d-flex align-items-center">
        </div>
      </div>
    </div>

    <div class="branding d-flex align-items-cente">
      <div class="container position-relative d-flex align-items-center justify-content-between">
        <a href="index.html" class="logo d-flex align-items-center">
          <h1 class="sitename">Bancos De Vida</h1>
          <span>.</span>
        </a>

        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="index.html">Início<br></a></li>
            <li><a href="index.html#about">Sobre</a></li>
            <li><a href="doacao-sangue.html" class="active">Mini Game - Doando Sangue</a></li>
            <li><a href="duvidasfrequentes.html">Dúvidas Frequentes</a></li>
            <li class="dropdown"><a href="#"><span>Informações</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="doacao-sangue.html">Requisitos para Doação</a></li>
                <li><a href="tipos-sanguineos.html">Tipos de Sangue</a></li>
                <li><a href="doacao-sangue.html">Processo de Doação</a></li>
              </ul>
            </li>
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>
      </div>
    </div>
  </header>

  <main id="main">
    <section class="breadcrumbs">
      <div class="container">
        <ol>
          <li><a href="index.html">Home</a></li>
          <li>Mini Game - Doando Sangue</li>
        </ol>
        <h2>Mini Game - Doando Sangue</h2>
      </div>
    </section>
    
    <section id="game-section" class="game-section">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div id="game-container">
              <h2 class="game-title text-center">Corrida da Vida: Gota Solidária</h2>
              <div class="text-center mb-3">
                <button id="start-btn" class="game-btn">Iniciar Jogo</button>
              </div>
              <canvas id="runner-canvas" width="700" height="250" style="background:#fff;display:none;border-radius:8px;"></canvas>
              <div id="score-box" class="mt-3 text-center" style="font-size:18px;font-weight:bold;"></div>
              <div id="fact-box" class="mt-3 text-center" style="display:none;background:#f8d7da;border:1px solid #e74c3c;border-radius:8px;padding:10px;"></div>
              <div id="game-over" class="hidden text-center mt-4">
                <h3>Fim de Jogo</h3>
                <p>Sua pontuação: <span id="final-score">0</span></p>
                <button id="restart-btn" class="game-btn">Reiniciar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer id="footer" class="footer accent-background">
    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-5 col-md-12 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <span class="sitename">Bancos De Vida</span>
          </a>
          <p>Seja um doador de sangue e salve vidas. Encontre locais de doação, saiba como doar e descubra a importância da Mini Game - Doando Sangue.</p>
          <div class="social-links d-flex mt-4">
            <a href=""><i class="bi bi-twitter-x"></i></a>
            <a href=""><i class="bi bi-facebook"></i></a>
            <a href=""><i class="bi bi-instagram"></i></a>
            <a href=""><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-6 footer-links">
          <h4>Links Úteis</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#about">Sobre nós</a></li>
            <li><a href="index.html#services">Serviços</a></li>
            <!-- <li><a href="#">Termos de serviço</a></li>
            <li><a href="#">Política de privacidade</a></li> -->
          </ul>
        </div>

        <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
          <h4>Contato</h4>
          <p>Entre em contato conosco</p>
          <p><strong>Email:</strong> <span>bancosdevidacarol@gmail.com</span></p>
        </div>
      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>© <span>Copyright</span> <strong class="px-1 sitename">Bancos de Vida</strong> <span>Todos os direitos reservados</span></p>
    </div>
  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const startBtn = document.getElementById('start-btn');
      const restartBtn = document.getElementById('restart-btn');
      const canvas = document.getElementById('runner-canvas');
      const ctx = canvas.getContext('2d');
      const scoreBox = document.getElementById('score-box');
      const factBox = document.getElementById('fact-box');
      const gameOverDiv = document.getElementById('game-over');
      const finalScore = document.getElementById('final-score');

      // Curiosidades
      const facts = [
        "Uma doação pode salvar até 4 vidas!",
        "O sangue doado é reposto em até 24h pelo corpo.",
        "Menos de 2% dos brasileiros doam sangue regularmente.",
        "O tipo O- é doador universal.",
        "A doação ajuda a controlar o nível de ferro no sangue.",
        "Você pode doar sangue a cada 2 meses (homens) ou 3 meses (mulheres).",
        "A primeira transfusão de sangue foi em 1818.",
        "O sangue não pode ser fabricado, só doado.",
        "O Brasil precisa de mais de 5 mil doações por dia.",
        "Doe sangue, salve vidas!"
      ];
      let factIndex = 0;

      // Jogo
      let running = false;
      let score = 0;
      let speed = 1;
      let gravity = 0.32;
      let jumpPower = 16;
      let groundY = 200;
      let obstacles = [];
      let frame = 0;
      let showFactAt = 100;
      let obstacleInterval = 300;
      let obstacleTypeIndex = 0;
      let lastSpeedIncrease = 0;
      const obstacleTypes = ['seringa', 'muro', 'bacteria'];
      let generateDoubleObstacle = false;

      // Gota
      const drop = {
        x: 60,
        y: groundY,
        w: 40,
        h: 60,
        vy: 0,
        jumping: false,
        draw() {
          // Gota estilizada
          ctx.save();
          ctx.beginPath();
          ctx.ellipse(this.x+this.w/2, this.y+this.h/2, this.w/2, this.h/1.7, 0, 0, Math.PI*2);
          ctx.fillStyle = '#e74c3c';
          ctx.fill();
          ctx.restore();
          // Olhinhos
          ctx.beginPath();
          ctx.arc(this.x+this.w/2-8, this.y+this.h/2-5, 4, 0, Math.PI*2);
          ctx.arc(this.x+this.w/2+8, this.y+this.h/2-5, 4, 0, Math.PI*2);
          ctx.fillStyle = '#fff';
          ctx.fill();
          ctx.beginPath();
          ctx.arc(this.x+this.w/2-8, this.y+this.h/2-5, 2, 0, Math.PI*2);
          ctx.arc(this.x+this.w/2+8, this.y+this.h/2-5, 2, 0, Math.PI*2);
          ctx.fillStyle = '#222';
          ctx.fill();
        },
        update() {
          this.y += this.vy;
          this.vy += gravity;
          if (this.y >= groundY) {
            this.y = groundY;
            this.vy = 0;
            this.jumping = false;
          }
        },
        jump() {
          if (!this.jumping && this.y >= groundY) {
            this.vy = -jumpPower;
            this.jumping = true;
          }
        }
      };

      function Obstacle() {
        this.x = canvas.width;
        this.w = 18 + Math.random()*10;
        this.h = 28 + Math.random()*10;
        this.y = groundY + drop.h - this.h + 10;
        this.type = obstacleTypes[obstacleTypeIndex];
        obstacleTypeIndex = (obstacleTypeIndex + 1) % obstacleTypes.length;
        this.draw = function() {
          ctx.save();
          if (this.type === 'seringa') {
            // Seringa
            ctx.fillStyle = '#bbb';
            ctx.fillRect(this.x, this.y, this.w, this.h);
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(this.x, this.y + this.h - 10, this.w, 10);
            // Ponta da seringa
            ctx.beginPath();
            ctx.moveTo(this.x + this.w/2, this.y);
            ctx.lineTo(this.x + this.w/2 - 4, this.y - 10);
            ctx.lineTo(this.x + this.w/2 + 4, this.y - 10);
            ctx.closePath();
            ctx.fillStyle = '#888';
            ctx.fill();
          } else if (this.type === 'muro') {
            // Mini muro de concreto
            ctx.fillStyle = '#888';
            ctx.fillRect(this.x, this.y, this.w, this.h);
            ctx.strokeStyle = '#555';
            ctx.lineWidth = 2;
            ctx.strokeRect(this.x, this.y, this.w, this.h);
            // Tijolinhos
            ctx.beginPath();
            ctx.moveTo(this.x, this.y + this.h/2);
            ctx.lineTo(this.x + this.w, this.y + this.h/2);
            ctx.moveTo(this.x + this.w/2, this.y);
            ctx.lineTo(this.x + this.w/2, this.y + this.h);
            ctx.stroke();
          } else if (this.type === 'bacteria') {
            // Bactéria estilizada
            ctx.beginPath();
            ctx.ellipse(this.x + this.w/2, this.y + this.h/2, this.w/2, this.h/2, 0, 0, Math.PI*2);
            ctx.fillStyle = '#6ab04c';
            ctx.fill();
            // Pontinhos
            ctx.beginPath();
            ctx.arc(this.x + this.w/2, this.y + this.h/2, 3, 0, Math.PI*2);
            ctx.arc(this.x + this.w/2 - 5, this.y + this.h/2 - 4, 2, 0, Math.PI*2);
            ctx.arc(this.x + this.w/2 + 5, this.y + this.h/2 + 4, 2, 0, Math.PI*2);
            ctx.fillStyle = '#2d572c';
            ctx.fill();
          }
          ctx.restore();
        }
      }

      function resetGame() {
        running = false;
        score = 0;
        speed = 1;
        obstacles = [];
        frame = 0;
        factIndex = 0;
        showFactAt = 100;
        drop.y = groundY;
        drop.vy = 0;
        drop.jumping = false;
        scoreBox.textContent = '';
        factBox.style.display = 'none';
        gameOverDiv.classList.add('hidden');
      }

      function startGame() {
        resetGame();
        canvas.style.display = 'block';
        running = true;
        requestAnimationFrame(gameLoop);
      }

      function gameLoop() {
        if (!running) return;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        // chão
        ctx.fillStyle = '#eee';
        ctx.fillRect(0, groundY+drop.h-10, canvas.width, 20);
        // gota
        drop.update();
        drop.draw();
        // obstáculos
        if (frame % obstacleInterval === 0) {
          if (score < 4000) {
            obstacles.push(new Obstacle());
          } else {
            if (generateDoubleObstacle) {
              // Dois obstáculos juntos, com pequeno espaço
              const obs1 = new Obstacle();
              const obs2 = new Obstacle();
              obs2.x = obs1.x + obs1.w + 24; // espaço de 24px entre eles
              obstacles.push(obs1, obs2);
            } else {
              obstacles.push(new Obstacle());
            }
            generateDoubleObstacle = !generateDoubleObstacle;
          }
        }
        for (let i=0; i<obstacles.length; i++) {
          const ob = obstacles[i];
          ob.x -= speed;
          ob.draw();
          // hitbox permissiva: reduz a área de colisão da gota
          const padding = 6;
          const dropLeft = drop.x + padding;
          const dropRight = drop.x + drop.w - padding;
          const dropTop = drop.y + padding;
          const dropBottom = drop.y + drop.h - padding;
          if (
            dropLeft < ob.x + ob.w &&
            dropRight > ob.x &&
            dropTop < ob.y + ob.h &&
            dropBottom > ob.y
          ) {
            running = false;
            canvas.style.display = 'none';
            finalScore.textContent = score;
            gameOverDiv.classList.remove('hidden');
            return;
          }
        }
        obstacles = obstacles.filter(ob => ob.x + ob.w > 0);
        // score
        score++;
        scoreBox.textContent = `Pontuação: ${score}`;
        // curiosidade
        if (score >= showFactAt && factIndex < facts.length) {
          factBox.textContent = facts[factIndex];
          factBox.style.display = 'block';
          factIndex++;
          showFactAt += 200;
          setTimeout(()=>{factBox.style.display='none';}, 4000);
        }
        // aumento gradual de velocidade a cada 700 pontos
        if (score - lastSpeedIncrease >= 700) {
          speed += 0.3;
          lastSpeedIncrease = score;
          console.log('Velocidade aumentada para:', speed); // Debug
        }
        frame++;
        requestAnimationFrame(gameLoop);
      }

      // controles
      document.addEventListener('keydown', function(e) {
        if (e.code === 'Space') {
          drop.jump();
          e.preventDefault();
        }
      });
      canvas.addEventListener('mousedown', ()=>drop.jump());
      canvas.addEventListener('touchstart', ()=>drop.jump());

      startBtn.addEventListener('click', startGame);
      if (restartBtn) restartBtn.addEventListener('click', startGame);
    });
  </script>

</body>

</html> 